# PWM Decoding

# 🎯 PWM Decoding - 202200867 변하연

본 프로젝트는 RC 수신기(R9DS)의 3개 채널을 사용하여 아래 기능을 제어하는 시스템을 구현한 것입니다.

- ✅ LED ON/OFF 제어 (CH9)
- ✅ LED 밝기 제어 (CH2)
- ✅ RGB LED 색상 제어 (CH3)

> 🔗 **시연 영상** : https://youtu.be/K3GcpnnoMX0?si=CwxZeCydMa4uAOfW

---


---

## ⚙️ 시스템 구성 및 작동 설명

본 시스템은 R9D 수신기와 아두이노를 기반으로 3개의 채널 입력을 이용해 LED를 제어합니다.

| 채널 번호 | 기능           | 설명 |
|-----------|----------------|------|
| CH2       | 밝기 제어      | RC 입력 펄스 길이에 따라 밝기(PWM) 변경 (0~255 역비례) |
| CH3       | 색상 제어      | 입력 값에 따라 RGB 색상이 연속적으로 변화 |
| CH9       | ON/OFF 스위치 | 임계값 이하일 경우 LED ON, 그 외 OFF |

### 🔌 핀 연결 구성

| 용도         | Arduino 핀 | 설명 |
|--------------|------------|------|
| CH2 입력     | 2번 핀     | 밝기 제어 채널 |
| CH3 입력     | 3번 핀     | 색상 제어 채널 |
| CH9 입력     | 4번 핀     | ON/OFF 제어 채널 |
| ON/OFF LED   | 5번 핀     | 디지털 출력 |
| 밝기 제어 LED| 6번 핀     | PWM 출력 |
| RGB RED      | 9번 핀     | PWM 출력 |
| RGB GREEN    | 8번 핀     | PWM 출력 |
| RGB BLUE     | 7번 핀     | PWM 출력 |

---

## 🧠 구현 방식 요약

- **인터럽트 기반 신호 측정**: 각 채널은 인터럽트를 통해 펄스폭 측정
- **TaskScheduler 사용**: LED 업데이트 및 디버그 메시지 출력 주기를 제어
- **색상 계산 로직**: `setRGB()` 함수로 입력 값을 RGB 색상으로 매핑
- **온오프 판단 기준**: 중앙값(1500μs)과 임계값(200μs)을 기준으로 판단

---

## ▶️ 실행 결과 (시연 영상 or 설명)

- RC 조종기를 조작하면 LED가 아래와 같이 반응합니다:
  1. **CH9 조작 시**: LED 전원이 켜졌다 꺼짐
  2. **CH2 조작 시**: LED 밝기 조절 가능
  3. **CH3 조작 시**: LED 색상이 부드럽게 변화


---

---

## 👩‍💻 개발 정보

- 작성자: 고광채, 변하연 
- 개발 보드: Arduino UNO
- 수신기: FrSky R9D
- 사용 언어: C++ (Arduino)
- 라이브러리:
  - `TaskScheduler.h`
  - `PinChangeInterrupt.h`


